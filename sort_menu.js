!function(){const e="MenuDragPlugin",t="lampa_menu_order",n="menu-item--dragging",o="menu-item--placeholder";function i(){console.log(`[${e}] Initializing...`),Lampa.Listener.follow("app",e=>{"ready"!==e.type||(c(),d())})}function c(){const e=JSON.parse(localStorage.getItem(t));if(e){const t=$(".settings-folder").parent();e.forEach(e=>{const n=$(`.settings-folder[data-component="${e}"]`);n.length&&t.append(n)}),console.log(`[${e}] Menu order loaded`)}}function l(){const e=[];$(".settings-folder").each(function(){e.push($(this).data("component"))}),localStorage.setItem(t,JSON.stringify(e)),console.log(`[${e}] Menu order saved`)}function d(){const e=$(".settings-folder");let t=null,o=null,i=null;e.on("mousedown touchstart",function(e){const c=$(this);i=setTimeout((function(){t=c,t.addClass(n),o=$("<div>").addClass(o),t.after(o),$(document).on("mousemove touchmove",u),$(document).on("mouseup touchend",f)}),500)}),$(document).on("mouseup touchend",(function(){clearTimeout(i)}));function c(e){if(!t)return;const n=e.pageY||e.originalEvent.touches[0].pageY;t.css("transform",`translateY(${n-t.offset().top-t.outerHeight()/2}px)`);const o=$(".settings-folder").not(t);let i=null;o.each(function(){const e=$(this),c=e.offset().top,l=e.outerHeight();n>c&&n<c+l/2?i=e:n>c+l/2&&n<c+l&&(i=e.next())}),i&&i.length?o.insertBefore(i):$(".settings-folder").parent().append(o)}function u(e){c(e)}function f(){t&&(t.insertBefore(o).removeClass(n).css("transform",""),o.remove(),t=null,o=null,l(),$(document).off("mousemove touchmove",u),$(document).off("mouseup touchend",f))}}const p=`.${n}{opacity:0.7;background-color:rgba(255,255,255,0.2)!important;transition:transform 0.1s;z-index:1000}.${o}{height:40px;background:rgba(255,255,255,0.1);border:2px dashed rgba(255,255,255,0.3);margin:5px 0;border-radius:6px}`;$("<style>").html(p).appendTo("head"),i()}();
